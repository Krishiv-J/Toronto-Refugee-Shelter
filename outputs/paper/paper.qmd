---
title: "My title"
subtitle: "My subtitle if needed"
author: 
  - Krishiv Jain
thanks: "Code and data are available at: LINK."
date: today
date-format: long
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(here)
library(knitr)
```


# Introduction

You can and should cross-reference sections and sub-sections. 

The remainder of this paper is structured as follows. @sec-data....


```{r}
#| echo: false
#| include: true
#| message: false


final_refugees_data <-
  read_csv(here("outputs/data/final_refugees_data.csv"))
  show_col_types = FALSE
```

# Data {#sec-data}


```{r}
#| echo: false
#| include: true
#| message: false
#| label: Sample of Data
#| tbl-cap: Sample of Cleaned Refugee Shelter Data

final_refugees_data <-
  read_csv(here("outputs/data/final_refugees_data.csv"))
  show_col_types = FALSE  

#Based on: https://tellingstorieswithdata.com/05-static_communication.html#tables 
final_refugees_data |>
  slice(1:10) |>
  kable()
```



# Results

```{r}
#| echo: false
#| include: true
#| message: false
#| label: fig-totalgraph
#| fig-cap: "Graph showing Total Refugees Over Time"
#| fig-pos: H

final_refugees_data |>
  ggplot(mapping = aes(x = Date, y = Total_Refugees)) +
  geom_line() +
  geom_point() +
  theme_minimal() +
  labs(x = "Date (Monthly)", y = "Total Refugees in Shelters", 
       caption = "Data source: City of Toronto Open Data") +
  scale_x_date(date_labels = "%b %Y", date_breaks = "1 year")
```

```{r}
#| echo: false
#| include: true
#| message: false
#| label: Summary Statistics
#| tbl-cap: "Summary Statistics"
#| fig-pos: H

#Based on: https://tellingstorieswithdata.com/05-static_communication.html#tables

## Table of Means ##
summary_mean <- final_refugees_data |>
  summarise(across(c(New_Refugees, Total_Refugees, Percentage_of_Total), 
                   list(mean = mean)))

## Table of SDs ##
summary_sd <- final_refugees_data |>
  summarise(across(c(New_Refugees, Total_Refugees, Percentage_of_Total), 
                   list(sd = sd)))

#Based on: https://www.geeksforgeeks.org/create-table-from-dataframe-in-r/
## Final Table ##
kable(data.frame(
    Metric = c("New_Refugees", "Total_Refugees", "Percentage_of_Total"),
    Mean = c(summary_mean$New_Refugees_mean, summary_mean$Total_Refugees_mean, summary_mean$Percentage_of_Total_mean),
    SD = c(summary_sd$New_Refugees_sd, summary_sd$Total_Refugees_sd, summary_sd$Percentage_of_Total_sd)
))

```

```{r}
#| echo: false
#| include: true
#| message: false
#| label: fig-newgraph
#| fig-cap: "Graph showing Trend of New Refugees Over Time"
#| fig-pos: H

final_refugees_data |>
  ggplot(mapping = aes(x = Date, y = New_Refugees)) +
  geom_line() +
  geom_point() +
  theme_minimal() +
  labs(x = "Date (Monthly)", y = "Newly Identified Refugees", 
       caption = "Data source: City of Toronto Open Data") +
  scale_x_date(date_labels = "%b %Y", date_breaks = "1 year")
```


```{r}
#| echo: false
#| include: true
#| message: false
#| label: fig-percentgraph
#| fig-cap: "Graph showing Trend of Refugees Percentage of Population Over Time"
#| fig-pos: H

final_refugees_data |>
  ggplot(mapping = aes(x = Date, y = Percentage_of_Total)) +
  geom_line() +
  geom_point() +
  theme_minimal() +
  labs(x = "Date (Monthly)", y = "Refugees Percentage of Population", 
       caption = "Data source: City of Toronto Open Data") +
  scale_x_date(date_labels = "%b %Y", date_breaks = "1 year")
```

# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {-}


# Additional data details

# Model details {#sec-model-details}

## Posterior predictive check

In @fig-ppcheckandposteriorvsprior-1 we implement a posterior predictive check. This shows...

In @fig-ppcheckandposteriorvsprior-2 we compare the posterior with the prior. This shows... 

## Diagnostics

@fig-stanareyouokay-1 is a trace plot. It shows... This suggests...

@fig-stanareyouokay-2 is a Rhat plot. It shows... This suggests...

\newpage


# References


